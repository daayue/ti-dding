# é’‰é’‰ç¾¤ç®¡ç†å·¥å…· - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿ä½ çš„ç³»ç»Ÿå·²å®‰è£…ï¼š
- Go 1.20 æˆ–æ›´é«˜ç‰ˆæœ¬
- Git

### 2. è·å–ä»£ç 

```bash
git clone https://github.com/your-username/ti-dding.git
cd ti-dding
```

### 3. å®‰è£…ä¾èµ–

```bash
go mod tidy
```

### 4. é…ç½®é’‰é’‰åº”ç”¨

1. å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿ï¼š
```bash
cp configs/config.yaml.example configs/config.yaml
```

2. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„é’‰é’‰åº”ç”¨ä¿¡æ¯ï¼š
```yaml
dingtalk:
  app_key: "your_app_key_here"        # ä»é’‰é’‰å¼€æ”¾å¹³å°è·å–
  app_secret: "your_app_secret_here"  # ä»é’‰é’‰å¼€æ”¾å¹³å°è·å–
  corp_id: "your_corp_id_here"        # ä¼ä¸šIDï¼ˆå¯é€‰ï¼‰
```

### 5. æ„å»ºåº”ç”¨

```bash
make build
```

æˆ–è€…æ‰‹åŠ¨æ„å»ºï¼š
```bash
go build -o ti-dding cmd/main.go
```

### 6. æµ‹è¯•å·¥å…·

æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼š
```bash
./ti-dding --help
```

## ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹

### æ‰¹é‡åˆ›å»ºç¾¤ç»„

1. å‡†å¤‡CSVæ–‡ä»¶ï¼ˆå‚è€ƒ `data/groups_example.csv`ï¼‰ï¼š
```csv
ç¾¤åç§°,ç¾¤æè¿°,ç¾¤ä¸»ç”¨æˆ·ID,ç¾¤æˆå‘˜ç”¨æˆ·IDåˆ—è¡¨
æµ‹è¯•ç¾¤1,è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç¾¤ç»„,user123,"user123,user456,user789"
æµ‹è¯•ç¾¤2,å¦ä¸€ä¸ªæµ‹è¯•ç¾¤ç»„,user456,"user456,user123"
```

2. æ‰§è¡Œåˆ›å»ºå‘½ä»¤ï¼š
```bash
./ti-dding create --file groups.csv
```

### æŸ¥çœ‹ç¾¤ç»„åˆ—è¡¨

```bash
./ti-dding list
```

### æ·»åŠ æˆå‘˜

æ·»åŠ åˆ°æŒ‡å®šç¾¤ç»„ï¼š
```bash
./ti-dding add-member --user-id "user101" --group-id "group123"
```

æ·»åŠ åˆ°æ‰€æœ‰ç¾¤ç»„ï¼š
```bash
./ti-dding add-member --user-id "user101" --all-groups
```

### ç§»é™¤æˆå‘˜

ä»æŒ‡å®šç¾¤ç»„ç§»é™¤ï¼š
```bash
./ti-dding remove-member --user-id "user101" --group-id "group123"
```

ä»æ‰€æœ‰ç¾¤ç»„ç§»é™¤ï¼š
```bash
./ti-dding remove-member --user-id "user101" --all-groups
```

### æ£€æŸ¥ç¾¤ç»„æ˜¯å¦å­˜åœ¨

```bash
./ti-dding check --name "æµ‹è¯•ç¾¤1"
```

### å¯¼å‡ºç¾¤ç»„æ•°æ®

```bash
./ti-dding export --output "groups_export.csv"
```

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `create` | æ‰¹é‡åˆ›å»ºç¾¤ç»„ | `./ti-dding create --file groups.csv` |
| `list` | åˆ—å‡ºæ‰€æœ‰ç¾¤ç»„ | `./ti-dding list` |
| `add-member` | æ·»åŠ ç¾¤ç»„æˆå‘˜ | `./ti-dding add-member --user-id user123 --all-groups` |
| `remove-member` | ç§»é™¤ç¾¤ç»„æˆå‘˜ | `./ti-dding remove-member --user-id user123 --group-id group123` |
| `check` | æ£€æŸ¥ç¾¤ç»„æ˜¯å¦å­˜åœ¨ | `./ti-dding check --name "ç¾¤ç»„åç§°"` |
| `export` | å¯¼å‡ºç¾¤ç»„æ•°æ® | `./ti-dding export --output export.csv` |

## ğŸ“ æ–‡ä»¶ç»“æ„

```
ti-dding/
â”œâ”€â”€ cmd/main.go              # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ internal/                # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ config/             # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ dingtalk/           # é’‰é’‰APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ storage/            # æ•°æ®å­˜å‚¨
â”œâ”€â”€ configs/                 # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/                    # æ•°æ®æ–‡ä»¶
â”œâ”€â”€ docs/                    # æ–‡æ¡£
â”œâ”€â”€ Makefile                 # æ„å»ºè„šæœ¬
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æƒé™è¦æ±‚**ï¼šç¡®ä¿ä½ çš„é’‰é’‰åº”ç”¨æœ‰åˆ›å»ºç¾¤ç»„å’Œç®¡ç†æˆå‘˜çš„æƒé™
2. **ç”¨æˆ·IDæ ¼å¼**ï¼šç”¨æˆ·IDå¿…é¡»æ˜¯é’‰é’‰ç³»ç»Ÿä¸­çš„æœ‰æ•ˆç”¨æˆ·ID
3. **ç¾¤ç»„åç§°å”¯ä¸€æ€§**ï¼šç¾¤ç»„åç§°åœ¨ç³»ç»Ÿä¸­å¿…é¡»å”¯ä¸€
4. **æ•°æ®å¤‡ä»½**ï¼šå®šæœŸå¤‡ä»½ `data/` ç›®å½•ä¸­çš„æ•°æ®æ–‡ä»¶

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•è·å–é’‰é’‰åº”ç”¨çš„AppKeyå’ŒAppSecretï¼Ÿ
A: ç™»å½•é’‰é’‰å¼€æ”¾å¹³å°ï¼Œåœ¨åº”ç”¨ç®¡ç†é¡µé¢å¯ä»¥æ‰¾åˆ°åº”ç”¨çš„AppKeyå’ŒAppSecretã€‚

### Q: ä¸ºä»€ä¹ˆåˆ›å»ºç¾¤ç»„å¤±è´¥ï¼Ÿ
A: å¯èƒ½çš„åŸå› ï¼š
- é…ç½®æ–‡ä»¶ä¸­çš„AppKey/AppSecretä¸æ­£ç¡®
- åº”ç”¨æ²¡æœ‰åˆ›å»ºç¾¤ç»„çš„æƒé™
- ç¾¤ç»„åç§°å·²å­˜åœ¨
- ç”¨æˆ·IDä¸å­˜åœ¨æˆ–æ— æ•ˆ

### Q: å¦‚ä½•æ‰¹é‡æ·»åŠ å¤šä¸ªç”¨æˆ·ï¼Ÿ
A: ç›®å‰æ”¯æŒä¸€æ¬¡æ·»åŠ ä¸€ä¸ªç”¨æˆ·ï¼Œå¦‚éœ€æ‰¹é‡æ·»åŠ å¤šä¸ªç”¨æˆ·ï¼Œå¯ä»¥å¤šæ¬¡æ‰§è¡Œå‘½ä»¤æˆ–ä¿®æ”¹ä»£ç æ”¯æŒæ‰¹é‡æ“ä½œã€‚

### Q: æ•°æ®å­˜å‚¨åœ¨å“ªé‡Œï¼Ÿ
A: ç¾¤ç»„æ•°æ®å­˜å‚¨åœ¨ `data/groups.json` æ–‡ä»¶ä¸­ï¼Œè·¯å¾„å¯åœ¨é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰ã€‚

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼š`./ti-dding --help`
2. æŸ¥çœ‹å…·ä½“å‘½ä»¤å¸®åŠ©ï¼š`./ti-dding create --help`
3. æäº¤Issueåˆ°é¡¹ç›®ä»“åº“
4. æŸ¥çœ‹é¡¹ç›®READMEæ–‡æ¡£

## ğŸ”„ æ›´æ–°å·¥å…·

```bash
git pull origin main
go mod tidy
make build
``` 