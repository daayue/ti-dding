# é’‰é’‰ç¾¤ç®¡ç†å·¥å…· (Ti-Dding)

ä¸€ä¸ªåŸºäº Golang å¼€å‘çš„é’‰é’‰ç¾¤ç»„ç®¡ç†å·¥å…·ï¼Œæ”¯æŒæ‰¹é‡åˆ›å»ºç¾¤ç»„ã€æˆå‘˜ç®¡ç†ç­‰æ“ä½œã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½
- **æ‰¹é‡åˆ›å»ºç¾¤ç»„**: æ”¯æŒCSVæ–‡ä»¶æ‰¹é‡å¯¼å…¥ï¼Œè‡ªåŠ¨åˆ›å»ºé’‰é’‰ç¾¤ç»„
- **ç¾¤åé‡å¤æ£€æµ‹**: æ™ºèƒ½æ£€æµ‹ç¾¤åæ˜¯å¦å·²å­˜åœ¨ï¼Œé¿å…é‡å¤åˆ›å»º
- **æˆå‘˜ç®¡ç†**: æ”¯æŒæ‰¹é‡æ·»åŠ /ç§»é™¤ç¾¤æˆå‘˜
- **æ•°æ®æŒä¹…åŒ–**: æœ¬åœ°æ–‡ä»¶å­˜å‚¨ï¼Œæ— éœ€å¤–éƒ¨æ•°æ®åº“ä¾èµ–

### ğŸ“Š æ•°æ®ç®¡ç†
- CSVæ–‡ä»¶å¯¼å…¥ç¾¤ç»„ä¿¡æ¯
- JSONæ ¼å¼æœ¬åœ°æ•°æ®å­˜å‚¨
- æ”¯æŒæ•°æ®å¯¼å‡ºå’Œå¤‡ä»½
- ç¾¤ç»„ä¿¡æ¯æŸ¥è¯¢å’Œç®¡ç†

## æŠ€æœ¯æ¶æ„

### å¼€å‘è¯­è¨€
- **Golang 1.21+**

### é¡¹ç›®ç»“æ„
```
ti-dding/
â”œâ”€â”€ cmd/                    # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ internal/              # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ config/           # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ dingtalk/         # é’‰é’‰APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ storage/          # æ•°æ®å­˜å‚¨
â”œâ”€â”€ pkg/                   # å…¬å…±åŒ…
â”œâ”€â”€ configs/               # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/                  # æ•°æ®æ–‡ä»¶
â”œâ”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶
â””â”€â”€ docs/                  # æ–‡æ¡£
```

### ä¾èµ–ç®¡ç†
- ä½¿ç”¨ Go modules ç®¡ç†ä¾èµ–
- ä¸»è¦ä¾èµ–åŒ…ï¼š
  - `github.com/spf13/cobra` - å‘½ä»¤è¡Œæ¡†æ¶
  - `github.com/spf13/viper` - é…ç½®ç®¡ç†
  - `encoding/csv` - CSVæ–‡ä»¶å¤„ç†
  - `encoding/json` - JSONæ•°æ®å¤„ç†

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Go 1.21 æˆ–æ›´é«˜ç‰ˆæœ¬
- é’‰é’‰å¼€å‘è€…è´¦å·å’ŒAppKey/AppSecret

### å®‰è£…
```bash
git clone https://github.com/your-username/ti-dding.git
cd ti-dding
go mod tidy
go build -o ti-dding cmd/main.go
```

### é…ç½®
1. å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿
```bash
cp configs/config.yaml.example configs/config.yaml
```

2. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥é’‰é’‰åº”ç”¨ä¿¡æ¯
```yaml
dingtalk:
  app_key: "your_app_key"
  app_secret: "your_app_secret"
  access_token: "your_access_token"
```

### ä½¿ç”¨ç¤ºä¾‹

#### æ‰¹é‡åˆ›å»ºç¾¤ç»„
```bash
# ä»CSVæ–‡ä»¶åˆ›å»ºç¾¤ç»„
./ti-dding create --file groups.csv

# æŸ¥çœ‹åˆ›å»ºç»“æœ
./ti-dding list
```

#### æˆå‘˜ç®¡ç†
```bash
# æ·»åŠ æˆå‘˜åˆ°æ‰€æœ‰ç¾¤ç»„
./ti-dding add-member --user-id "user123" --all-groups

# æ·»åŠ æˆå‘˜åˆ°æŒ‡å®šç¾¤ç»„
./ti-dding add-member --user-id "user123" --group-id "group123"

# ç§»é™¤æˆå‘˜
./ti-dding remove-member --user-id "user123" --group-id "group123"
```

## CSVæ–‡ä»¶æ ¼å¼

### ç¾¤ç»„åˆ›å»ºCSVæ ¼å¼
```csv
ç¾¤åç§°,ç¾¤æè¿°,ç¾¤ä¸»ç”¨æˆ·ID,ç¾¤æˆå‘˜ç”¨æˆ·IDåˆ—è¡¨
æµ‹è¯•ç¾¤1,è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç¾¤,user123,"user123,user456,user789"
æµ‹è¯•ç¾¤2,å¦ä¸€ä¸ªæµ‹è¯•ç¾¤,user456,"user123,user456"
```

## æ•°æ®å­˜å‚¨

### ç¾¤ç»„ä¿¡æ¯å­˜å‚¨
ç¾¤ç»„ä¿¡æ¯ä»¥JSONæ ¼å¼å­˜å‚¨åœ¨ `data/groups.json` æ–‡ä»¶ä¸­ï¼š
```json
{
  "groups": [
    {
      "id": "cid123456",
      "name": "æµ‹è¯•ç¾¤1",
      "description": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç¾¤",
      "owner_id": "user123",
      "member_count": 3,
      "created_at": "2024-01-01T10:00:00Z",
      "status": "active"
    }
  ]
}
```

## å¼€å‘è®¡åˆ’

### Phase 1: åŸºç¡€æ¡†æ¶ (Week 1)
- [x] é¡¹ç›®ç»“æ„æ­å»º
- [x] é…ç½®ç®¡ç†
- [x] é’‰é’‰APIå®¢æˆ·ç«¯åŸºç¡€æ¡†æ¶

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (Week 2)
- [ ] ç¾¤ç»„åˆ›å»ºAPIé›†æˆ
- [ ] CSVæ–‡ä»¶è§£æ
- [ ] ç¾¤åé‡å¤æ£€æµ‹
- [ ] æ•°æ®å­˜å‚¨å®ç°

### Phase 3: æˆå‘˜ç®¡ç† (Week 3)
- [ ] æˆå‘˜æ·»åŠ åŠŸèƒ½
- [ ] æˆå‘˜ç§»é™¤åŠŸèƒ½
- [ ] æ‰¹é‡æ“ä½œæ”¯æŒ

### Phase 4: ä¼˜åŒ–å®Œå–„ (Week 4)
- [ ] é”™è¯¯å¤„ç†ä¼˜åŒ–
- [ ] æ—¥å¿—è®°å½•
- [ ] å•å…ƒæµ‹è¯•
- [ ] æ–‡æ¡£å®Œå–„

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚ 